{
  "$schema": "https://json-schema.org/draft/2020-12/schema",
  "$id": "ls_plan_v1.schema.json",
  "title": "ls_plan_v1",
  "type": "object",
  "additionalProperties": false,
  "required": ["schema", "ls"],
  "properties": {
    "schema": {
      "type": "string",
      "const": "ls_plan_v1"
    },
    "ls": {
      "type": "object",
      "additionalProperties": false,
      "required": [
        "root",
        "depth",
        "view",
        "sort",
        "order",
        "top_n",
        "include_hidden",
        "classify",
        "git_status",
        "limits"
      ],
      "properties": {
        "root": {
          "type": "string",
          "minLength": 1
        },
        "depth": {
          "type": "integer",
          "minimum": 0,
          "maximum": 32
        },
        "view": {
          "type": "string",
          "enum": ["flat", "tree"]
        },
        "sort": {
          "type": "string",
          "enum": ["mtime", "size", "name"]
        },
        "order": {
          "type": "string",
          "enum": ["asc", "desc"]
        },
        "top_n": {
          "type": "integer",
          "minimum": 1,
          "maximum": 10000
        },
        "include_hidden": {
          "type": "boolean"
        },
        "classify": {
          "type": "object",
          "additionalProperties": false,
          "required": ["by_extension", "by_coarse_type"],
          "properties": {
            "by_extension": { "type": "boolean" },
            "by_coarse_type": { "type": "boolean" }
          }
        },
        "git_status": {
          "type": "string",
          "enum": ["auto", "on", "off"]
        },
        "limits": {
          "type": "object",
          "additionalProperties": false,
          "required": ["max_entries_scanned", "max_bytes_view"],
          "properties": {
            "max_entries_scanned": {
              "type": "integer",
              "minimum": 1,
              "maximum": 5000000
            },
            "max_bytes_view": {
              "type": "integer",
              "minimum": 1,
              "maximum": 50000000
            }
          }
        }
      }
    }
  }
}
